# 三、Azure ML Studio组件

在本章中，您将探索**Azure Machine Learning Studio**(**Azure ML Studio**)web 界面，这是一种用于管理端到端机器学习生命周期的沉浸式体验。您将获得可用组件的概述，这些组件允许您管理工作空间资源、创作机器学习模型并跟踪您的资产，包括您的数据集、训练模型及其发布的端点。

在本章中，我们将讨论以下主要话题:

*   与 Azure ML 资源交互
*   探索 Azure ML Studio 体验
*   Azure ML Studio 中的创作实验
*   在 Azure ML Studio 中跟踪数据科学资产
*   在 Azure ML Studio 中管理基础设施资源

# 技术要求

您需要访问 Azure 订阅。在该订阅中，您将需要一个`packt-azureml-rg`。你将需要一个`Contributor`或者`Owner`T3。如果你按照第二章 、*部署 Azure 机器学习工作区资源*中的说明，这些资源应该已经对你可用了。

# 与 Azure ML 资源交互

在的前一章中，您在`packt-azureml-rg`资源组中部署了`packt-learning-mlw`机器学习资源。通过在顶部搜索栏中键入资源名称并从结果列表中选择资源，导航到已部署的资源:

![Figure 3.1 – Navigating to the Azure Machine Learning resource
](img/B16777_03_001.jpg)

图 3.1-导航到 Azure 机器学习资源

这将使您进入资源的概览窗格，如*图 3.2* 所示:

1.  在左边，你会看到大多数 Azure 服务都有的典型资源菜单。该菜单也称为左窗格。
2.  在顶部，您将看到命令栏，它允许您下载`config.json`文件，该文件包含您通过 Python SDK 连接到工作空间所需的所有信息，并允许您删除机器学习工作空间。
3.  在命令栏下方，您可以看到工作窗格，您可以在其中查看与工作区相关的信息，包括与此工作区一起部署的存储帐户、密钥库、容器注册表和 application insights 资源的链接:

![Figure 3.2 – The machine learning resource page
](img/B16777_03_002.jpg)

图 3.2–机器学习资源页面

在左边的窗格，你会找到所有 Azure 资源中你能找到的所有常用选项。这包括以下指示性清单:

*   `Access control (IAM)`，您可以使用它来配置对特定工作区的角色访问，包括分配自定义角色，如您在上一章中创建的角色。
*   `Diagnostic settings`，它使您能够为 Azure Machine Learning workspace 生成的日志和指标配置流式导出到您选择的目的地。通常，这是**日志分析**，而是 **Azure Monitor** 的一部分。
*   `New support request`，如果您的工作环境出现问题，您可以轻松请求支持。

在`Settings`部分，您还会注意到`Private endpoint connections`选项，它允许您配置 Azure 私有端点。这是一个可以连接到虚拟网络的虚拟网络接口。它允许虚拟网络中的所有资源安全地连接到你的 Azure 机器学习工作空间。一旦你启用了这个选项，所有的数据层操作，比如使用 Azure ML Studio、API(包括发布的管道)或者 SDK 都需要通过这个私有端点。

从左侧窗格中选择概览选项，并点击工作窗格中间的`Launch studio`按钮。这将在您的浏览器中打开一个新的选项卡，将您带到工作室体验。

# 探索 Azure ML Studio 体验

Azure Machine Learning 带有一个专用的 web 界面，允许您实现无代码和代码优先的数据科学计划。你可以通过 Azure 门户资源中的`Launch studio`按钮访问 web 界面，就像你在上一节看到的那样，或者直接访问 https://ml.azure.com 的[页面。对于后一种方法，如果这是你第一次](https://ml.azure.com)访问 Studio 站点，你将不得不手动选择 **Azure Active Directory** 租户、**订阅**，以及你想要连接的**机器学习工作区**的名称，如图*图 3.3* 所示。

![Figure 3.3 – Selecting the machine learning workspace in ml.azure.com
](img/B16777_03_003.jpg)

图 3.3–选择 ml.azure.com 的机器学习工作区

一旦选择了你的工作空间，你将登陆 Azure Machine Learning Studio 的主页，如图*图 3.4* 所示。

![Figure 3.4 – Azure Machine Learning Studio home page
](img/B16777_03_004.jpg)

图 3.4–Azure ML Studio主页

在左侧有一个提供以下类别的菜单，您将在接下来的章节中探索所有这些类别:

*   **作者**:使用创作工具构建、训练、评估和部署机器学习模型。
*   **资产**:准备数据、运行和监控作业、查看和部署模型，以及管理实时和管道端点。
*   **管理**:查看和管理工作区的资源。

您可以通过单击左上角的图标来折叠菜单，如下面的屏幕截图所示:

![Figure 3.5 – Collapsed side menu
](img/B16777_03_005.jpg)

图 3.5–折叠的侧菜单

在右上角，如*图 3.6* 所示，有以下选项:

1.  **登录信息:**显示已登录用户的信息，并允许您注销。
2.  **工作区选择器:**这允许你改变你正在工作的活动 Azure 机器学习工作区。
3.  **提供反馈:**这允许你向 Azure 机器学习团队发送笑脸或皱眉的表情。这有助于他们改进你不喜欢的东西，或者突出你喜欢的东西。
4.  **Help:** 提供帮助资源和文档的链接。此菜单还允许您运行工作区诊断，并识别工作区的潜在配置问题。
5.  **设置:**在这里，您可以选择黑暗主题选项，并更改您工作室的语言和区域格式。
6.  **通知:**此菜单选项允许您管理您将收到的工作区通知。这种通知的一个例子是当实验运行完成时您会收到的通知。

![Figure 3.6 – Top-right menu
](img/B16777_03_006.jpg)

图 3.6-右上菜单

在下一个部分，我们将看看左侧菜单的各个部分，从创作部分开始。

# 在 Azure ML Studio 中进行创作实验

Azure ML Studio 提供了以下创作体验:

*   **笔记本**允许你直接在工作区使用文件、文件夹和 **Jupyter 笔记本**。您将在 [*第 7 章*](B16777_07_Final_VK_ePub.xhtml#_idTextAnchor102) 、*azure ml Python SDK*中使用笔记本，在那里您将看到代码优先的数据科学过程。
*   **自动化 ML** 允许您针对给定数据集快速测试多种算法组合，并根据您定义的成功指标找到最佳模型。你会在第五章[](B16777_05_Final_VK_ePub.xhtml#_idTextAnchor072)**让机器做模型训练*中读到更多这方面的内容。*
**   **Designer** 通过在一个流程中连接数据集和数据转换、模型训练等模块，让你可视化地设计一个实验。通过在画布上设计这个流程，你可以在不编写任何代码的情况下训练和部署机器学习模型，这一点你会在 [*第六章*](B16777_06_Final_VK_ePub.xhtml#_idTextAnchor084) 、*视觉模型训练和发布*中读到更多。*   **数据标注**允许您为策展数据集创建标注项目。这使您可以将贴标工作扩展到多个贴标机，有效地协调贴标工作，并使用 ML Assist 提高贴标机的生产效率，ML Assist 会在您贴标数据时自动进行训练。*

 *自动化 ML 和 designer 都是数据科学的无代码/低代码方法的一部分，你将在本书的后面探索。

重要说明

数据标签目前位于左侧菜单的**管理**部分。然而，从逻辑上讲，这是 Azure ML Studio 提供的创作体验的一部分。由于工作室体验在不断发展，这个功能可能会在不久的将来移到**作者**部分。

# 在 Azure ML Studio 中跟踪数据科学资产

在 assets 部分，您可以跟踪所有处于机器学习操作核心的组件。每个数据科学项目都有以下资产:

*   **数据集**是你可以找到注册数据集的地方。这是一个集中的注册表，您可以在其中注册您的数据集，并避免同事不得不处理相同数据的本地副本，或者更糟的是，这些数据的子集。您将在第 4 章 、*配置工作空间*中使用数据集。
*   **Experiments** 是跟踪脚本执行或运行组的集中位置。当您训练一个模型时，您正在记录该过程的各个方面，包括您可能需要用来比较性能的指标。要将所有尝试归入相同的上下文，您应该在相同的实验名称下提交所有运行；然后，结果会出现在这个区域。你将在第五章[](B16777_05_Final_VK_ePub.xhtml#_idTextAnchor072)**中做实验，让机器做模型训练*。*
**   **Pipelines** 允许你创建和管理编排机器学习步骤的工作流。例如，一个非常常见的机器学习训练工作流包含三个步骤:数据处理、模型训练和模型注册。管道可以是 ML 训练管道，如前一个示例所示，也可以是批量数据推理管道，换句话说，管道使用机器学习模型对数据集进行推理。在此部分中，您可以查看所有已注册的管道，监视它们的执行，并查看已发布的端点，这允许您临时触发其中一个管道。你将在 [*第 11 章*](B16777_11_Final_VK_ePub.xhtml#_idTextAnchor160) ，*使用管道*中使用管道。*   **模型**是你的机器学习模型的注册表。这是你记录他们版本的地方。它允许您通过 web 界面即时部署。要发布一个模型，您需要首先在这个注册表中注册它。你将在整本书中使用这个注册表，从第五章[](B16777_05_Final_VK_ePub.xhtml#_idTextAnchor072)**开始，让机器做模型训练*。***   **端点**由两部分组成:实时端点和管道端点。实时端点是托管在 **Azure 容器实例** ( **ACI** )或 **Azure Kubernetes 服务** ( **AKS** )中的 web 应用，它们公开了一个 REST API，允许第三方应用使用您部署的机器学习模型。另一方面，管道端点是允许您触发已经在前面提到的相应部分中注册的管道的端点。**

 **所有前面的经历都是相互关联的，当你探索你将要进行的实验时，你会发现自己从一个部分导航到另一个部分:

![Figure 3.7 – Interconnected assets in Azure ML
](img/B16777_03_007.jpg)

图 3.7-Azure ML 中的互联资产

运行机器学习实验的先决条件是拥有执行训练脚本的计算资源。您还需要能够存储和访问您注册为数据集的数据的引擎。这些是您将在下一节中管理的资源。

# 在 Azure ML Studio 中管理基础设施资源

为了进行实验，你需要消耗一些基础设施资源。您可以通过以下部分来配置和管理它们:

*   **Compute** 提供您可以在实验中使用的托管计算基础架构。这使您可以注册和利用虚拟机，这些虚拟机可能具有多个 CPU 和 GPU 以及可以向其中加载海量数据集的内存大小。将这些计算作为托管服务意味着您不必担心安装操作系统或保持其补丁和最新。您将在第 4 章 、*配置工作空间*中了解更多关于各种计算选项的信息。
*   **数据存储**包含访问各种引擎中的数据所需的连接信息，例如 **Azure Blob 存储**和 **Azure SQL 数据库**。此信息用于访问您在**计算**部分注册的数据集。您将在第 4 章 、*配置工作区*中了解更多关于数据存储的概念。
*   链接服务允许您查看外部服务和工作空间之间的连接。例如，您可以连接 Synapse Spark 池，并使用 Spark 运行数据准备任务。
*   环境允许您为要执行的代码指定软件要求。例如，如果您正在训练一个 PyTorch 模型，您将需要在将执行您的训练脚本的环境中安装 PyTorch 库。你将在第八章 、*中学习更多关于环境的知识，尝试 Python 代码*。

# 总结

Azure Machine Learning Studio 提供了一个 web 环境，您可以在其中管理 Azure Machine Learning 工作区中的所有工件。您可以查看和管理 Jupyter 笔记本、数据集、实验、管道、模型和端点。您还可以管理将在实验中使用的计算资源和数据存储。Studio 还提供了交互式工具，您可以使用这些工具来执行无代码的数据科学实验，这将在本书的下一章中深入探讨。AutoML 向导是第一个嵌入 Azure ML Studio 的无代码体验，它允许你运行自动化的机器学习实验。Azure Machine Learning designer 是下一个无代码体验，它可以帮助你以图形方式设计管道并创建工作流，而无需编写代码。这种体验也支持低代码场景，在这种场景中，如果需要，您可以删除代码片段。最后，数据标注项目允许您创建、管理和监控繁琐的项目来标注您的数据。

要开始使用这些交互式工具，您至少需要调配一项计算资源。此外，您将需要注册您的数据存储。这些数据存储将托管您将在模型训练阶段使用的数据。

在下一章，你将学习如何通过 Azure ML Studio 执行这些操作。***